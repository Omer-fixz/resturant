# متطلبات تطبيق لوحة تحكم المطاعم السودانية

## المقدمة

تطبيق شامل لإدارة المطاعم السودانية يوفر نظام حسابات، إدارة منيو، نظام طلبات لحظي، وتقارير تحليلية مع مراعاة الظروف المحلية السودانية.

## المسرد

- **Restaurant**: المطعم وصاحبه
- **Menu**: قائمة الوجبات المتاحة
- **Meal**: وجبة واحدة في المنيو
- **Order**: طلب من العميل
- **Dashboard**: لوحة تحكم المطعم
- **Socket.io**: اتصال فوري بين السيرفر والعميل
- **Cloudinary**: خدمة تخزين الصور
- **Firebase Auth**: نظام المصادقة

## المتطلبات

### المتطلب 1: نظام المصادقة والحسابات

**قصة المستخدم:** كصاحب مطعم، أريد إنشاء حساب وتسجيل الدخول بأمان، حتى أتمكن من إدارة مطعمي.

#### معايير القبول

1. WHEN يقوم صاحب المطعم بالتسجيل THEN النظام SHALL التحقق من البريد الإلكتروني والكلمة المرورية وحفظ الحساب في Firebase
2. WHEN يقوم صاحب المطعم بتسجيل الدخول THEN النظام SHALL التحقق من بيانات الاعتماد وإعادة توجيهه إلى لوحة التحكم
3. WHEN يقوم صاحب المطعم بتسجيل الخروج THEN النظام SHALL حذف جلسة المستخدم وإعادة توجيهه إلى صفحة تسجيل الدخول
4. WHEN يقوم صاحب المطعم بنسيان كلمة المرور THEN النظام SHALL إرسال رابط إعادة تعيين إلى بريده الإلكتروني

### المتطلب 2: ملف شخصي للمطعم

**قصة المستخدم:** كصاحب مطعم، أريد إنشاء وتعديل ملفي الشخصي، حتى يتمكن العملاء من معرفة معلومات مطعمي.

#### معايير القبول

1. WHEN يقوم صاحب المطعم بإنشاء ملف شخصي THEN النظام SHALL حفظ (الاسم، رقم الهاتف، الموقع، الشعار) في Firestore
2. WHEN يقوم صاحب المطعم برفع شعار المطعم THEN النظام SHALL رفع الصورة إلى Cloudinary وحفظ الرابط
3. WHEN يقوم صاحب المطعم بتعديل معلومات المطعم THEN النظام SHALL تحديث البيانات في Firestore فوراً
4. WHEN يقوم صاحب المطعم بعرض ملفه الشخصي THEN النظام SHALL عرض جميع المعلومات المحفوظة بشكل صحيح

### المتطلب 3: إدارة المنيو (CRUD)

**قصة المستخدم:** كصاحب مطعم، أريد إضافة وتعديل وحذف الوجبات من منيوي، حتى أتمكن من إدارة قائمة الطعام.

#### معايير القبول

1. WHEN يقوم صاحب المطعم بإضافة وجبة THEN النظام SHALL رفع الصورة إلى Cloudinary وحفظ (الاسم، السعر، الوصف، رابط الصورة) في Firestore
2. WHEN يقوم صاحب المطعم بتعديل وجبة THEN النظام SHALL تحديث البيانات في Firestore وتحديث الصورة إذا لزم الأمر
3. WHEN يقوم صاحب المطعم بحذف وجبة THEN النظام SHALL حذف الوجبة من Firestore وحذف الصورة من Cloudinary
4. WHEN يقوم صاحب المطعم بعرض المنيو THEN النظام SHALL عرض جميع الوجبات مع الصور والأسعار والأوصاف
5. WHEN يقوم صاحب المطعم بتفعيل/تعطيل وجبة THEN النظام SHALL تحديث حالة الوجبة (Available/Unavailable) فوراً

### المتطلب 4: نظام الطلبات اللحظي

**قصة المستخدم:** كصاحب مطعم، أريد تلقي تنبيهات فورية للطلبات الجديدة، حتى أتمكن من الرد بسرعة.

#### معايير القبول

1. WHEN يقوم عميل بطلب وجبة THEN النظام SHALL إرسال تنبيه فوري إلى لوحة تحكم المطعم عبر Socket.io
2. WHEN يصل طلب جديد THEN النظام SHALL تشغيل صوت تنبيه ورسالة مرئية على الشاشة
3. WHEN يقوم صاحب المطعم بقبول الطلب THEN النظام SHALL تحديث حالة الطلب إلى "Accepted" وإخطار العميل
4. WHEN يقوم صاحب المطعم بتحديث حالة الطلب THEN النظام SHALL تحديث الحالة (Pending -> Accepted -> Preparing -> Ready) وإخطار العميل فوراً
5. WHEN يكون المطعم غير متصل THEN النظام SHALL عرض حالة "Offline" وحفظ الطلبات لإرسالها عند الاتصال

### المتطلب 5: تحديث الأسعار بالجملة

**قصة المستخدم:** كصاحب مطعم في السودان، أريد تحديث أسعار جميع الوجبات بنسبة مئوية واحدة، حتى أتمكن من مواجهة التضخم بسرعة.

#### معايير القبول

1. WHEN يقوم صاحب المطعم بإدخال نسبة مئوية THEN النظام SHALL تطبيق النسبة على جميع الوجبات
2. WHEN يتم تحديث الأسعار THEN النظام SHALL عرض الأسعار الجديدة والقديمة للمقارنة
3. WHEN يقوم صاحب المطعم بتأكيد التحديث THEN النظام SHALL حفظ الأسعار الجديدة في Firestore

### المتطلب 6: إدارة حالة الاتصال

**قصة المستخدم:** كصاحب مطعم، أريد معرفة حالة اتصالي بالنظام، حتى أتأكد من استقبالي للطلبات.

#### معايير القبول

1. WHEN يكون المطعم متصلاً بـ Socket.io THEN النظام SHALL عرض حالة "Online" بلون أخضر
2. WHEN ينقطع الاتصال THEN النظام SHALL عرض حالة "Offline" بلون أحمر وحفظ الطلبات محلياً
3. WHEN يعود الاتصال THEN النظام SHALL مزامجة الطلبات المحفوظة مع السيرفر

### المتطلب 7: خيارات الدفع

**قصة المستخدم:** كصاحب مطعم، أريد تحديد طرق الدفع المقبولة (كاش، بنك، أو كلاهما)، حتى يعرف العملاء كيفية الدفع.

#### معايير القبول

1. WHEN يقوم صاحب المطعم بتحديد طرق الدفع THEN النظام SHALL حفظ الخيارات في Firestore
2. WHEN يعرض العميل المنيو THEN النظام SHALL عرض طرق الدفع المتاحة فقط
3. WHEN يقوم صاحب المطعم بتعديل طرق الدفع THEN النظام SHALL تحديث الخيارات فوراً

### المتطلب 8: لوحة التحليلات

**قصة المستخدم:** كصاحب مطعم، أريد عرض تقارير عن مبيعاتي والوجبات الأكثر طلباً، حتى أتمكن من تحسين أدائي.

#### معايير القبول

1. WHEN يفتح صاحب المطعم لوحة التحليلات THEN النظام SHALL عرض إجمالي مبيعات اليوم
2. WHEN يعرض صاحب المطعم التقارير THEN النظام SHALL عرض الوجبات الأكثر طلباً والأقل طلباً
3. WHEN يختار صاحب المطعم فترة زمنية THEN النظام SHALL عرض مقارنة الأداء الأسبوعية والشهرية
4. WHEN يعرض صاحب المطعم الإحصائيات THEN النظام SHALL عرض عدد الطلبات المكتملة والملغاة

### المتطلب 9: واجهة المستخدم

**قصة المستخدم:** كصاحب مطعم، أريد واجهة سهلة الاستخدام وسريعة الاستجابة، حتى أتمكن من إدارة مطعمي بكفاءة.

#### معايير القبول

1. THE UI SHALL استخدام Tailwind CSS أو Material UI للتصميم الحديث
2. THE UI SHALL تكون متجاوبة (Responsive) على جميع الأجهزة (Desktop, Tablet, Mobile)
3. THE UI SHALL عرض رسائل خطأ واضحة عند حدوث مشاكل
4. THE UI SHALL عرض مؤشرات تحميل أثناء العمليات الطويلة

### المتطلب 10: الأمان والخصوصية

**قصة المستخدم:** كصاحب مطعم، أريد أن تكون بيانات مطعمي آمنة وخاصة، حتى لا يتمكن أحد من الوصول إليها.

#### معايير القبول

1. WHEN يقوم صاحب المطعم بتسجيل الدخول THEN النظام SHALL استخدام Firebase Authentication بشكل آمن
2. WHEN يتم نقل البيانات THEN النظام SHALL استخدام HTTPS وتشفير البيانات الحساسة
3. WHEN يحاول مستخدم غير مصرح بالوصول THEN النظام SHALL رفض الوصول وإعادة التوجيه إلى صفحة تسجيل الدخول
